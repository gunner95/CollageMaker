var app=angular.module("photoApi",[]);app.controller("picController",function(a){function b(a){switch(a.keyCode){case 46:var b=d.getActiveObject();return void d.remove(b)}}function c(b){var c;for(c=0;c<4;c++)if(!$("#myImg-"+c).attr("src")){$("#myImg-"+c).attr("src",b.target.result),e.push(b.target.result);break}a.$apply(function(){a.imageUrl=b.target.result})}a.imageUrl="",$(function(){$(":file").change(function(){if(this.files&&this.files[0]){var a=new FileReader;a.onload=c,a.readAsDataURL(this.files[0])}})});var d=this.__canvas=new fabric.Canvas("c");fabric.Object.prototype.transparentCorners=!1;window.onkeydown=b;var e=[];a.toCanvas=function(b){a.imageUrl=e[b],fabric.Image.fromURL(a.imageUrl,function(a){a.scale(.1).set({left:100,top:100,angle:-15}),d.add(a).setActiveObject(a)})}});